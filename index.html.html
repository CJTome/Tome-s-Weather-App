<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"> <!-- Character encoding -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive design for mobile -->
  <title>Weather App</title>

  <!-- Import Tailwind CSS for quick styling -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Import Google Fonts for clean and modern text */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Roboto:wght@400;500&display=swap');

    /* ==== GENERAL BODY STYLES ==== */
    body {
      font-family: 'Poppins', sans-serif; /* Main font */
      background: linear-gradient(135deg, #3b82f6, #9333ea, #0ea5e9); /* Animated gradient background */
      background-size: 400% 400%;
      animation: gradientMove 15s ease infinite; /* Infinite animation loop */
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
      padding: 1rem;
    }

    /* Background gradient animation */
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ==== WEATHER CARD STYLES ==== */
    .weather-card {
      background: rgba(255, 255, 255, 0.15); /* Semi-transparent glass effect */
      backdrop-filter: blur(20px); /* Frosted glass look */
      border-radius: 1.5rem; /* Rounded corners */
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3); /* Soft drop shadow */
      width: 100%;
      max-width: 420px;
      text-align: center;
      padding: 2rem;
      transition: transform 0.2s ease-in-out; /* Smooth hover animation */
    }

    .weather-card:hover {
      transform: scale(1.02); /* Slight pop-up effect on hover */
    }

    /* ==== INPUT BOX STYLES ==== */
    .input-box {
      width: 100%;
      padding: 0.8rem;
      border-radius: 0.75rem;
      border: none;
      outline: none;
      font-size: 1rem;
      margin-top: 1rem;
      color: #222;
    }

    /* ==== BUTTON STYLES ==== */
    .btn {
      margin-top: 1rem;
      width: 100%;
      padding: 0.9rem;
      background: linear-gradient(90deg, #2563eb, #06b6d4); /* Blue gradient */
      border: none;
      border-radius: 0.75rem;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .btn:hover {
      background: linear-gradient(90deg, #1d4ed8, #0ea5e9);
      transform: translateY(-2px); /* Button lift effect */
    }

    /* ==== WEATHER DISPLAY ==== */
    .weather-icon {
      width: 120px;
      height: 120px;
      margin: 1rem auto;
    }

    #temperature {
      font-size: 3.5rem;
      font-weight: 700;
      color: #fff;
      text-shadow: 0 0 20px rgba(255,255,255,0.3);
    }

    #description {
      font-size: 1.2rem;
      text-transform: capitalize; /* Makes first letter uppercase */
    }

    #details {
      font-family: 'Roboto', sans-serif;
      margin-top: 0.5rem;
      color: #e2e8f0;
    }

    #errorMessage {
      margin-top: 1rem;
      font-weight: 600;
      color: #f87171;
    }
  </style>
</head>

<body>
  <!-- === MAIN WEATHER CARD CONTAINER === -->
  <div class="weather-card">
    <h1 class="text-3xl font-bold mb-4">🌦 Live Weather</h1>

    <!-- Input field to enter city name -->
    <input type="text" id="cityInput" class="input-box" placeholder="Enter city name...">

    <!-- Button to trigger weather fetch -->
    <button class="btn" id="getWeather">Get Weather</button>

    <!-- Weather info container (hidden until data is loaded) -->
    <div id="weatherInfo" class="hidden mt-6">
      <img id="weatherIcon" class="weather-icon" src="" alt="Weather Icon">
      <h2 id="cityName" class="text-xl font-semibold"></h2>
      <p id="temperature"></p>
      <p id="description"></p>
      <p id="details"></p>
    </div>

    <!-- Error message area -->
    <p id="errorMessage"></p>
  </div>

  <script>
    /* ======================================
       WEATHER APP JAVASCRIPT LOGIC
       ====================================== */

    // ======= GLOBAL VARIABLES =======
    const apiKey = "022649ec1d8945301cbacda68d686488"; // ⬅️ Your OpenWeatherMap API key
    const cityInput = document.getElementById("cityInput");
    const getWeatherBtn = document.getElementById("getWeather");
    const weatherInfo = document.getElementById("weatherInfo");
    const cityName = document.getElementById("cityName");
    const temperature = document.getElementById("temperature");
    const description = document.getElementById("description");
    const details = document.getElementById("details");
    const weatherIcon = document.getElementById("weatherIcon");
    const errorMessage = document.getElementById("errorMessage");


    /* ======================================
       FETCH WEATHER BY CITY NAME
       ====================================== */
    async function fetchWeather(city) {
      try {
        // Build the API URL using the city name
        const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

        // Fetch data from the API
        const response = await fetch(url);
        const data = await response.json(); // Convert response to JSON

        // Check if the API returned an error code (e.g., 404 city not found)
        if (data.cod !== 200) throw new Error(data.message);

        // If successful, show weather info on screen
        displayWeather(data);
      } catch (error) {
        // Handle and show any error message
        showError(error.message);
      }
    }


    /* ======================================
       FETCH WEATHER BY GEOLOCATION
       ====================================== */
    async function fetchWeatherByCoords(lat, lon) {
      try {
        // API request with latitude and longitude
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;
        const response = await fetch(url);
        const data = await response.json();

        if (data.cod !== 200) throw new Error(data.message);
        displayWeather(data);
      } catch (error) {
        showError(error.message);
      }
    }


    /* ======================================
       DISPLAY WEATHER DATA IN UI
       ====================================== */
    function displayWeather(data) {
      // Hide old error messages
      errorMessage.textContent = "";

      // Display city and country
      cityName.textContent = `${data.name}, ${data.sys.country}`;

      // Display rounded temperature in Celsius
      temperature.textContent = `${Math.round(data.main.temp)}°C`;

      // Weather description (e.g. "clear sky")
      description.textContent = data.weather[0].description;

      // Additional info: humidity & wind speed
      details.textContent = `Humidity: ${data.main.humidity}% | Wind: ${data.wind.speed} m/s`;

      // Weather icon from OpenWeatherMap
      weatherIcon.src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;

      // Show the weather section
      weatherInfo.classList.remove("hidden");
    }


    /* ======================================
       DISPLAY ERROR MESSAGE ON SCREEN
       ====================================== */
    function showError(message) {
      weatherInfo.classList.add("hidden"); // Hide weather info
      errorMessage.textContent = `⚠️ ${message}`; // Show error text
    }


    /* ======================================
       EVENT: WHEN "GET WEATHER" BUTTON CLICKED
       ====================================== */
    getWeatherBtn.addEventListener("click", () => {
      const city = cityInput.value.trim(); // Remove extra spaces
      if (city) fetchWeather(city); // If input not empty, call API
      else showError("Please enter a city name."); // Else show error
    });


    /* ======================================
       EVENT: AUTO-DETECT LOCATION ON LOAD
       ====================================== */
    window.addEventListener("load", () => {
      // Check if browser supports geolocation
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          // Success: fetch weather using coordinates
          (pos) => fetchWeatherByCoords(pos.coords.latitude, pos.coords.longitude),
          // Error: user denied permission or failed
          () => showError("Location access denied. Please enter a city manually.")
        );
      } else {
        showError("Geolocation not supported by your browser.");
      }
    });
  </script>
</body>
</html>
